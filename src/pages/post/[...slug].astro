---
import { CollectionEntry, getCollection } from "astro:content"

import FullPost from "@/components/FullPost.astro"
import MainLayout from "@/layouts/MainLayout.astro"


export async function getStaticPaths() {
	const posts = await getCollection("blog")
	return posts
		.filter(
			(post: CollectionEntry<"blog">) =>
				process.env === "development" || post.data.published === true
		)
		.map((post) => ({
			params: { slug: post.slug },
			props: post,
		}))
}
type Props = CollectionEntry<"blog">;

const post = Astro.props
const { Content } = await post.render();
---

<MainLayout>
	<FullPost post={post}>
		<Content />
	</FullPost>
</MainLayout>
